var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let r,s;function i(t,e){return r||(r=document.createElement("a")),r.href=e,t===r.href}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t){s=t}const v=[],y=[],k=[],x=[],w=Promise.resolve();let T=!1;function _(t){k.push(t)}const E=new Set;let A=0;function C(){const t=s;do{for(;A<v.length;){const t=v[A];A++,b(t),I(t.$$)}for(b(null),v.length=0,A=0;y.length;)y.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];E.has(e)||(E.add(e),e())}k.length=0}while(v.length);for(;x.length;)x.pop()();T=!1,E.clear(),b(t)}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const O=new Set;let j;function L(t,e){t&&t.i&&(O.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(O.has(t))return;O.add(t),j.c.push((()=>{O.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function P(t){t&&t.c()}function S(t,n,l,r){const{fragment:s,on_mount:i,on_destroy:u,after_update:a}=t.$$;s&&s.m(n,l),r||_((()=>{const n=i.map(e).filter(c);u?u.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(_)}function z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(v.push(t),T||(T=!0,w.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,c,l,r,i,u,a,d=[-1]){const p=s;b(e);const g=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:c.target||p.$$.root};a&&a(g.root);let m=!1;if(g.ctx=l?l(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return g.ctx&&i(g.ctx[t],g.ctx[t]=c)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](c),m&&N(e,t)),n})):[],g.update(),m=!0,o(g.before_update),g.fragment=!!r&&r(g.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();c.intro&&L(e.$$.fragment),S(e,c.target,c.anchor,c.customElement),C()}b(p)}class F{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];const H=document.body;H.addEventListener("dragenter",(function(t){t.stopPropagation(),t.preventDefault()}),!1),H.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault()}),!1),H.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault(),R(t.dataTransfer.files)}),!1);let M=0;function R(t){for(const n of t){let t="image."+config.check;n.type.match(t)?e(n,!0):n.type.match(/image.*/)&&e(n,!1)}function e(t,e){let n=new FileReader;n.readAsDataURL(t),n.onload=o=>{const c={id:M++,content:t,other:o,img:n.result,result:"",resultOk:!1,boolType:e};Q.update((t=>(t.push(c),t)))}}}const U=function(t){Q.update((e=>e.filter((e=>e.id!==t.id))))},J=async function(t){let e,n;Q.subscribe((t=>{e=t}));for(const o of e)o.id===t&&(n=o);const o=await async function(t){let e=await fetch(config.url,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});if(e.ok){return await e.json()}return console.log("Ошибка HTTP: "+e.status),null}(n);null!==o&&(n.resultOk=!0,n.result=o),Q.update((t=>(t.forEach(((t,e)=>e===n.id?n:t)),console.log(t),t)))},G=function(t){let e,n;Q.subscribe((t=>{e=t}));for(const o of e)o.id===t&&(n=o);let o=n.content.name.replace(/\.[^.$]+$/,"");var c=document.createElement("a");c.href=n.result.body,c.download=o+"."+config.to,c.click()},K=R,Q=function(e,n=t){let o;const c=new Set;function r(t){if(l(e,t)&&(e=t,o)){const t=!q.length;for(const t of c)t[1](),q.push(t,e);if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,s){const i=[l,s];return c.add(i),1===c.size&&(o=n(r)||t),l(e),()=>{c.delete(i),0===c.size&&(o(),o=null)}}}}([]),V={en:{upload:"Upload",downloadTo:"Download to",downloadAll:"Download all",convertTo:"Convert to",convertAll:"Convert All",incorrectFormat:"Incorrect format"}};function W(t){let e,n;return{c(){e=d("img"),i(e.src,n=t[0].img)||h(e,"src",n),h(e,"alt",""),h(e,"class","svelte-98s392")},m(t,n){a(t,e,n)},p(t,o){1&o&&!i(e.src,n=t[0].img)&&h(e,"src",n)},d(t){t&&f(e)}}}function X(t){let e,n;return{c(){e=d("img"),i(e.src,n=t[0].result.body)||h(e,"src",n),h(e,"alt",""),h(e,"class","svelte-98s392")},m(t,n){a(t,e,n)},p(t,o){1&o&&!i(e.src,n=t[0].result.body)&&h(e,"src",n)},d(t){t&&f(e)}}}function Y(e){let n;return{c(){n=d("span"),n.textContent=`${V[e[2]].incorrectFormat}`,h(n,"class","bold failed")},m(t,e){a(t,n,e)},p:t,d(t){t&&f(n)}}}function Z(t){let e;function n(t,e){return t[0].resultOk?et:tt}let o=n(t),c=o(t);return{c(){c.c(),e=p("")},m(t,n){c.m(t,n),a(t,e,n)},p(t,l){o===(o=n(t))&&c?c.p(t,l):(c.d(1),c=o(t),c&&(c.c(),c.m(e.parentNode,e)))},d(t){c.d(t),t&&f(e)}}}function tt(t){let e,n,o,c,l,r,s=V[t[2]].convertTo+"",i=t[1].to+"";return{c(){e=d("button"),n=p(s),o=g(),c=p(i),h(e,"class","bold but svelte-98s392")},m(s,i){a(s,e,i),u(e,n),u(e,o),u(e,c),l||(r=m(e,"click",t[3]),l=!0)},p(t,e){2&e&&i!==(i=t[1].to+"")&&$(c,i)},d(t){t&&f(e),l=!1,r()}}}function et(t){let e,n,o,c,l,r,s=V[t[2]].downloadTo+"",i=t[1].to+"";return{c(){e=d("button"),n=p(s),o=g(),c=p(i),h(e,"class","bold but success svelte-98s392")},m(s,i){a(s,e,i),u(e,n),u(e,o),u(e,c),l||(r=m(e,"click",t[5]),l=!0)},p(t,e){2&e&&i!==(i=t[1].to+"")&&$(c,i)},d(t){t&&f(e),l=!1,r()}}}function nt(e){let n,o,c,l,r,s,i,b,v,y,k,x,w,T=e[0].content.name+"";function _(t,e){return t[0].resultOk?X:W}let E=_(e),A=E(e);function C(t,e){return t[0].boolType?Z:Y}let I=C(e),O=I(e);return{c(){n=d("div"),o=d("div"),c=d("div"),A.c(),l=g(),r=d("div"),s=d("span"),i=p(T),b=g(),v=d("div"),O.c(),y=g(),k=d("div"),k.innerHTML='<i class="fa-solid fa-xmark svelte-98s392"></i>',h(c,"class","imgBlock svelte-98s392"),h(r,"class",""),h(o,"class","flex svelte-98s392"),h(k,"class","delete svelte-98s392"),h(v,"class","flex svelte-98s392"),h(n,"class","card svelte-98s392")},m(t,f){a(t,n,f),u(n,o),u(o,c),A.m(c,null),u(o,l),u(o,r),u(r,s),u(s,i),u(n,b),u(n,v),O.m(v,null),u(v,y),u(v,k),x||(w=m(k,"click",e[4]),x=!0)},p(t,[e]){E===(E=_(t))&&A?A.p(t,e):(A.d(1),A=E(t),A&&(A.c(),A.m(c,null))),1&e&&T!==(T=t[0].content.name+"")&&$(i,T),I===(I=C(t))&&O?O.p(t,e):(O.d(1),O=I(t),O&&(O.c(),O.m(v,y)))},i:t,o:t,d(t){t&&f(n),A.d(),O.d(),x=!1,w()}}}function ot(t,e,n){let{item:o}=e,{typeImg:c}=e,l=c.lang;return t.$$set=t=>{"item"in t&&n(0,o=t.item),"typeImg"in t&&n(1,c=t.typeImg)},[o,c,l,function(){J(o.id)},function(){U(o)},function(){G(o.id)}]}class ct extends F{constructor(t){super(),B(this,t,ot,nt,l,{item:0,typeImg:1})}}function lt(e){let n,c,l,r,s,i,p;return{c(){n=d("div"),c=d("label"),c.textContent=`${e[2]}  ${e[3]}`,l=g(),r=d("input"),h(c,"for","fileInput"),h(c,"class","bold but"),h(r,"type","file"),h(r,"class","hidden svelte-79mznn"),h(r,"id","fileInput"),h(r,"accept",e[4]),r.multiple=!0,h(n,"class",s="upload-btn "+(e[0].length>0?"upload-mini-screan":"upload-full-screan")+" svelte-79mznn")},m(t,o){a(t,n,o),u(n,c),u(n,l),u(n,r),i||(p=[m(r,"change",e[7]),m(r,"change",e[5])],i=!0)},p(t,[e]){1&e&&s!==(s="upload-btn "+(t[0].length>0?"upload-mini-screan":"upload-full-screan")+" svelte-79mznn")&&h(n,"class",s)},i:t,o:t,d(t){t&&f(n),i=!1,o(p)}}}function rt(t,e,n){let o,{configapp:c}=e,l=c.lang,r=V[l].upload,s=c.from;console.log(c);let i="jpg"===s?".jpg .jpeg":"."+s;Q.subscribe((t=>{n(0,o=t)}));let u=[];return t.$$set=t=>{"configapp"in t&&n(6,c=t.configapp)},[o,u,r,s,i,function(){K(u),document.querySelector("#fileInput").value=""},c,function(){u=this.files,n(1,u)}]}class st extends F{constructor(t){super(),B(this,t,rt,lt,l,{configapp:6})}}function it(e){let n,o,c,l,r,s,i,m,b,v=V[e[0].lang].convertAll+"",y=V[e[0].lang].downloadAll+"";return{c(){n=d("div"),o=d("button"),c=p(v),r=g(),s=d("button"),i=p(y),h(o,"type","button"),h(o,"class",l="bold but "+(e[2]?"hidden":"")),h(s,"type","button"),h(s,"class",m="bold but success "+(e[2]?"":"hidden")),h(n,"class",b="convert "+(e[1].length>1?"":"hidden")+" svelte-tgsibi")},m(t,e){a(t,n,e),u(n,o),u(o,c),u(n,r),u(n,s),u(s,i)},p(t,[e]){1&e&&v!==(v=V[t[0].lang].convertAll+"")&&$(c,v),4&e&&l!==(l="bold but "+(t[2]?"hidden":""))&&h(o,"class",l),1&e&&y!==(y=V[t[0].lang].downloadAll+"")&&$(i,y),4&e&&m!==(m="bold but success "+(t[2]?"":"hidden"))&&h(s,"class",m),2&e&&b!==(b="convert "+(t[1].length>1?"":"hidden")+" svelte-tgsibi")&&h(n,"class",b)},i:t,o:t,d(t){t&&f(n)}}}function ut(t,e,n){let o,{configapp:c}=e;Q.subscribe((t=>{n(1,o=t)}));let l=!1;return t.$$set=t=>{"configapp"in t&&n(0,c=t.configapp)},t.$$.update=()=>{if(2&t.$$.dirty)for(const t of o){if(!1===t.resultOk){n(2,l=!1);break}n(2,l=!0)}},[c,o,l]}class at extends F{constructor(t){super(),B(this,t,ut,it,l,{configapp:0})}}function ft(t,e,n){const o=t.slice();return o[2]=e[n],o}function dt(t){let e,n;return e=new ct({props:{typeImg:t[0],item:t[2]}}),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.typeImg=t[0]),2&n&&(o.item=t[2]),e.$set(o)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function pt(t){let e,n,c,l,r,s,i,p=t[1],m=[];for(let e=0;e<p.length;e+=1)m[e]=dt(ft(t,p,e));const $=t=>D(m[t],1,1,(()=>{m[t]=null}));return l=new st({props:{configapp:t[0]}}),s=new at({props:{configapp:t[0]}}),{c(){e=d("div"),n=d("div");for(let t=0;t<m.length;t+=1)m[t].c();c=g(),P(l.$$.fragment),r=g(),P(s.$$.fragment),h(n,"class","upload-block svelte-10fgmiy")},m(t,o){a(t,e,o),u(e,n);for(let t=0;t<m.length;t+=1)m[t].m(n,null);u(n,c),S(l,n,null),u(e,r),S(s,e,null),i=!0},p(t,[e]){if(3&e){let l;for(p=t[1],l=0;l<p.length;l+=1){const o=ft(t,p,l);m[l]?(m[l].p(o,e),L(m[l],1)):(m[l]=dt(o),m[l].c(),L(m[l],1),m[l].m(n,c))}for(j={r:0,c:[],p:j},l=p.length;l<m.length;l+=1)$(l);j.r||o(j.c),j=j.p}const r={};1&e&&(r.configapp=t[0]),l.$set(r);const i={};1&e&&(i.configapp=t[0]),s.$set(i)},i(t){if(!i){for(let t=0;t<p.length;t+=1)L(m[t]);L(l.$$.fragment,t),L(s.$$.fragment,t),i=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)D(m[t]);D(l.$$.fragment,t),D(s.$$.fragment,t),i=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(m,t),z(l),z(s)}}}function gt(t,e,n){let o,{typeToConvert:c}=e;return console.log(c),Q.subscribe((t=>{n(1,o=t)})),t.$$set=t=>{"typeToConvert"in t&&n(0,c=t.typeToConvert)},[c,o]}return new class extends F{constructor(t){super(),B(this,t,gt,pt,l,{typeToConvert:0})}}({target:document.getElementById("app"),props:{typeToConvert:config}})}();
//# sourceMappingURL=bundle.js.map
